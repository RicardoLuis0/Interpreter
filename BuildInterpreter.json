#!/usr/bin/env RBuild
{
    "working_folder":".build/",
    "project_name":"Interpreter",
    "project_binary":"Interpreter",
    "targets":{
        "common":{
            "sources":[
                {
                    "name":"src",
                    "type":"exclude",
                    "exclude_list":[
                        "test.cpp",
                        "main.cpp"
                    ],
                }
            ],
            "flags_c_cpp":[
                "-Iinclude",
                "-Wshadow",
                "-Winit-self",
                "-Wunreachable-code",
                "-Wmissing-declarations",
                "-Wmain",
                "-Wall",
                "-Wsuggest-override",
                "-Werror=return-type",
            ],
            "flags_cpp":[
                "-std=c++17",
                "-fexceptions",
                "-Wnon-virtual-dtor",
                "-Wpessimizing-move",
                "-Wold-style-cast",
                "-Wredundant-move"
            ],
            "include_only":true
        },
        "common_main":{
            "sources":["src/main.cpp"],
            "include_only":true
        },
        "common_test":{
            "sources":["src/test.cpp"],
            "project_binary_override":"InterpreterTest",
            "include_only":true
        },
        "release":{
            "include":[
                "common","common_main"
            ],
            "defines_c_cpp":[
                "NDEBUG"
            ],
            "flags_c_cpp":[
                "-O2"
            ],
            "linker_flags":[
                "-s"
            ]
        },
        "debug":{
            "include":[
                "common","common_main"
            ],
            "defines_c_cpp":[
                "DEBUG"
            ],
            "flags_c_cpp":[
                "-g"
            ]
        },
        "release_test":{
            "include":[
                "common","common_test"
            ],
            "target_folder_override":"release",
            "defines_c_cpp":[
                "NDEBUG"
            ],
            "flags_c_cpp":[
                "-O2"
            ],
            "linker_flags":[
                "-s"
            ]
        },
        "debug_test":{
            "include":[
                "common","common_test"
            ],
            "target_folder_override":"debug",
            "defines_c_cpp":[
                "DEBUG"
            ],
            "flags_c_cpp":[
                "-g"
            ]
        },
    },
    "targets_default":"release"
}

